<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Three.js 101</title>
  <link rel="shortcut icon" href="myIcon.ico" type="image/x-icon" />
  <!--  Simple reset to delete the margins  -->
  <style>
  			body {
  				font-family: Monospace;
  				background-color: #F5F5F5;
  				margin: 0px;
  				overflow: hidden;
  			}
  			#container {
  				height: 492px;
  				width: 876px;
  			}
  </style>

  <!--  Three.js CDN  -->
  <script src="./lib/three.min.js"></script>
  <script src="./lib/Detector.js"></script>
  <script src="./lib/OrbitControls.js"></script>
  <script src="./lib/stats.min.js"></script>
  <script src="./lib/dat.gui.min.js"></script>
  <script>
      let selectedOption = sessionStorage.getItem("SelectedOption");

      function onChangeEvent(index){
        console.log("index",index);
        sessionStorage.setItem("SelectedOption", index);
        location.href = run.demo.options[index].value;
      }

			function getParameterByName(name) {
  			let match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
  			return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
			}

			let loadScript = getParameterByName('load');

			if ('undefined' !== typeof loadScript) {
				if ( loadScript !== null ) {
					let thescript = document.createElement('script');
					thescript.setAttribute('src',loadScript);
					document.getElementsByTagName('head')[0].appendChild(thescript);
				}
			}
			else {
				alert(loadScript);
			}

		</script>
</head>
<body>
  <canvas id="canvas">
  <script>
    let selectedDemo;

    if ( ! Detector.webgl ) {
      Detector.addGetWebGLMessage();
    }
    else {
      elem = document.createElement("div");
      elem.id = 'myID';
      elem.id = 'myID';
      elem.innerHTML =
        ['<br><form name="run"><label>&nbsp;Select demo:</label>',
            '<select name="demo" id="mySelect"',
            //' OnChange="location.href=run.demo.options[selectedIndex].value">',
            ' OnChange="onChangeEvent(selectedIndex)">',
            '	  <option value="?load=./js/Default.js">----------</option>',
            '	 	<option value="?load=./js/Fireworks/LoadProject.js">Fireworks</option>',
            '	 	<option value="?load=./js/HexDoctor/LoadProject.js">HexDoctor</option>',
            '	 	<option value="?load=./js/Universe/LoadProject.js">Universe</option>',
            '	 	<option value="?load=./js/LowPoly/LoadProject.js">LowPoly</option>',
            '</select>'].join('\n');

      elem.innerHTML = elem.innerHTML + "</form><br/>";

      document.body.insertBefore(elem,document.body.childNodes[0]);
    }

    if('undefined' != typeof selectedOption && selectedOption){
      console.log("selectedOption",selectedOption);
      let elem = document.getElementById("mySelect");
      elem.selectedIndex = selectedOption;
    }
  </script>
</body>

</html>
